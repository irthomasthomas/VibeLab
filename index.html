<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeLab - Prompt Variation Testing</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ§ª VibeLab</h1>
            <p>Test and evaluate virtual few-shot prompt variations</p>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="setup">Experiment Setup</button>
            <button class="tab-btn" data-tab="queue">Generation Queue</button>
            <button class="tab-btn" data-tab="evaluate">Evaluation</button>
            <button class="tab-btn" data-tab="results">Results</button>
        </nav>

        <!-- Experiment Setup Tab -->
        <section id="setup-tab" class="tab-content active">
            <div class="setup-grid">
                                <div class="setup-section">
                    <h3>Base Prompts</h3>
                    
                    <!-- Template Management -->
                    <div class="template-management">
                        <div class="template-selector-row">
                            <select id="template-selector">
                                <option value="">Select a template or create custom...</option>
                            </select>
                            <button id="load-template">Load Template</button>
                            <button id="save-as-template">Save as Template</button>
                        </div>
                        <div class="template-actions">
                            <button id="manage-templates">Manage Templates</button>
                        </div>
                    </div>
                    
                    <!-- Dynamic Prompts -->
                    <div class="prompt-inputs" id="dynamic-prompts">
                        <!-- Will be populated dynamically -->
                    </div>
                    <button id="add-prompt">+ Add Custom Prompt</button>
                </div>
                <div class="setup-section">
                    <h3>Models</h3>
                    <div class="model-selection">
                        <label><input type="checkbox" value="anthropic/claude-3-5-sonnet-20241022" checked> Claude 3.5 Sonnet</label>
                        <label><input type="checkbox" value="gpt-4"> GPT-4</label>
                        <label><input type="checkbox" value="claude-3-opus-20240229"> Claude 3 Opus</label>
                        <input type="text" id="custom-model" placeholder="Custom model name">
                        <button id="add-model">+ Add Custom</button>
                    </div>
                </div>

                <div class="setup-section">
                                                    <div class="setup-section">
                    <h3>Prompt Engineering Techniques</h3>
                    <p>Define techniques using {prompt} as a placeholder for the base prompt.</p>
                    
                    <div id="prompt-techniques-container">
                        <!-- Default techniques -->
                        <div class="prompt-technique-item">
                            <input type="checkbox" class="technique-enabled" value="base" checked>
                            <input type="text" class="technique-name" value="Baseline" readonly>
                            <textarea class="technique-template" readonly>{prompt}</textarea>
                            <span class="technique-type">(built-in)</span>
                        </div>
                        <div class="prompt-technique-item">
                            <input type="checkbox" class="technique-enabled" value="role_play">
                            <input type="text" class="technique-name" value="Role-Play Expert">
                            <textarea class="technique-template">You are an expert graphic designer with 10+ years of SVG creation experience. Create: {prompt}</textarea>
                            <span class="technique-type">(editable)</span>
                        </div>
                         <div class="prompt-technique-item">
                            <input type="checkbox" class="technique-enabled" value="chain_of_thought">
                            <input type="text" class="technique-name" value="Chain of Thought">
                            <textarea class="technique-template">Think step-by-step to create this. First, identify key elements. Second, plan composition. Third, define SVG structure. Finally, generate the SVG code for: {prompt}</textarea>
                            <span class="technique-type">(editable)</span>
                        </div>
                    </div>
                    <button type="button" id="add-prompt-technique" class="secondary-btn">+ Add Custom Technique</button>
                </div>
<div class="setup-section">
                    <h3>Generation Settings</h3>
                    <div class="gen-settings">
                        <label>SVGs per variation: <input type="number" id="svgs-per-var" value="4" min="1" max="10"></label>
                        <label>Max parallel jobs: <input type="number" id="max-parallel" value="3" min="1" max="10"></label>
                        <label>Experiment name: <input type="text" id="experiment-name" placeholder="Auto-generated if empty"></label>
                        
                        <button id="start-experiment" class="primary-btn">Create Experiment</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Generation Queue Tab -->
        <section id="queue-tab" class="tab-content">
            <div class="queue-controls">
                <button id="start-queue" class="primary-btn" disabled>Start Generation</button>
                <button id="pause-queue" disabled>Pause</button>
                <button id="clear-queue" disabled>Clear Queue</button>
                <span id="queue-status">No experiment loaded</span>
            </div>

            <div class="queue-list" id="queue-list">
                <!-- Queue items will be populated here -->
            </div>
        </section>

        <!-- Evaluation Tab -->
        <section id="evaluate-tab" class="tab-content">
            <div class="eval-controls">
                <select id="eval-prompt-filter">
                    <option value="all">All Prompts</option>
                </select>
                <select id="eval-view-mode">
                    <option value="per-prompt">Per Prompt Ranking</option>
                    <option value="global">Global Comparison</option>
                </select>
                <button id="reset-rankings">Reset Rankings</button>
                <select id="analysis-mode">
                    <option value="simple">Simple Average Ranking</option>
                    <option value="statistical">Statistical Analysis</option>
                </select>
                <label><input type="checkbox" id="hide-details" checked> Hide details (images only)</label>
            </div>

            <div class="ranking-area">
                <div id="ranking-instructions" class="instructions">
                    Drag and drop SVGs to rank them from best (top) to worst (bottom)
                </div>
                <div id="statistics-panel" class="statistics-panel" style="display: none;">
                    <!-- Statistics will be displayed here -->
                </div>
                <div id="svg-grid" class="svg-ranking-grid">
                    <!-- SVGs will be populated here for ranking -->
                </div>
            </div>
        </section>

        <!-- Results Tab -->
        <section id="results-tab" class="tab-content">
            <div class="results-controls">
                <button id="export-results">
                <button id="migrate-data" class="secondary-btn">Migrate localStorage Data</button>Export to JSONL</button>
                <button id="save-experiment">Save Experiment</button>
                <button id="load-experiment">Load Experiment</button>
            </div>

            <div class="results-summary">
                <h3>Experiment Summary</h3>
                <div id="summary-stats"></div>
            </div>

            <div class="results-table">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Prompt</th>
                            <th>Variation Type</th>
                            <th>Model</th>
                            <th>Generated</th>
                            <th>Quality Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Results will be populated here -->
                    </tbody>
                </table>
            </div>

            <div class="experiment-overview">
                <h3>Experiment Timeline</h3>
                <div id="experiment-grid">
                    <!-- Timeline will be populated here -->
                </div>
            </div>
        </section>
    </div>

    <script src="app.js"></script>

    <!-- Template Management Modal -->
    <div id="template-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Manage Templates</h3>
            <div id="template-list">
                <!-- Will be populated dynamically -->
            </div>
            <div class="template-form">
                <h4>Create New Template</h4>
                <input type="text" id="new-template-name" placeholder="Template name">
                <textarea id="new-template-prompt" placeholder="Prompt text"></textarea>
                <input type="text" id="new-template-tags" placeholder="Tags (comma-separated)">
                <label>
                    <input type="checkbox" id="new-template-animated"> Animated
                </label>
                <button id="create-template">Create Template</button>
            </div>
        </div>
    </div>

</body>
</html>
